# 关于脉冲控制

如何控制旋转速度

例如当前10ms一个周期 频率为100HZ 速度为5

那么当前5ms一个周期 频率为200HZ 速度就为10

如何调整呢 我认为可以设置动态ARR 

例如->ARR = A这种方式 参考我的代码没问题对CCR和AAR的更新

如何控制旋转速度

频率更快即单位时间内高低电平交替更快



# 关于通讯控制

我认为通讯控制类似于JY901S发送串口进入指定模式

可以使用sendcmd 发送一个字符型数组来实现

举个例子对于控制电机使能控制的指令 以地址0x01为例

0x01 0xf3 0xab 0x01 0x00 0x6b

可以存储在char enablec[6] = {0x0,0xf3,0xab,0x01,0x00,0x6b};







关于双电机控制的同步性来避免出现锯齿

我认为要保证同步性就是 加速度一致速度一致浅显理解

也就是PWM的对齐性 A电机是50 B电机应该也是50

群友建议使用mcpwm两个定时器隔离开来保证直线的稳定性

对于f407vet6来说也就是高级定时器TIM1和TIM8的PWM通道

里面有啥互补啥的可以试一试



# 关于mcpwm的应用场景

首先就是对齐频率 也就是周期

保证高电平开始时刻是相同的

例如从45度斜线调整至90度斜线

那么垂直方向的角度应该大于水平方向的角度

对应上就是在同样时间内 垂直方向输出的脉冲数和水平方向的脉冲数要成对应比例 保证周期的一致性 

